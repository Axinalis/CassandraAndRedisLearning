#!/bin/bash

cd ../
echo "Starting a container"
sudo docker-compose up db -d
echo "Waiting 1 minute for Cassandra node to start"
sleep 90

echo "Executing scripts"
sudo docker exec cassandraandredislearning-db-1 cqlsh -e "CREATE KEYSPACE library WITH REPLICATION = {'class' : 'NetworkTopologyStrategy', 'datacenter1' : 1 };"
sudo docker exec cassandraandredislearning-db-1 cqlsh -e "CREATE TABLE library.book (bookid bigint, title text, author text, PRIMARY KEY (bookid));"
